const PERFILES={ADMINISTRADOR:1,VENDEDOR:2,CALL:3,REINGRESOS:4},MODALIDADES={CARRERA:1,CURSO:2},ESTADOS={NUEVO:1,SEGUIMIENTO:2,OPORTUNUDAD:3,CIERRE:4,NO_CONTACTADO:5,PERDIDO:6,OTROS:7,REINGRESO:12,REASIGNADO:13},ACCIONES={TELEFONO:1,CORREO:2,WHATSAPP:3,MENSAJE:4},ESTADOS_DETALLE={MATRICULADO:8,REINGRESO:32},CARRERAS={SEMI_PRESENCIAL_PRIMEROS_AUXILIOS:19,SEMI_MOVILIZACION_MASAJE:20,SEMI_PRESENCIAL_INYECTABLES:24,SEMI_PRESENCIAL_SATURA:26};var pagination=!1;$((function(){function getNotifications(){$(".notifications-menu .dropdown-menu").html("<i class='fa fa-circle-o-notch fa-spin fa-2x fa-fw'></i>").addClass("text-center p-15"),$.get("/cliente/notifications",(function(data){let html='<li class="header">Tienes '+data.data.length+(data.data.length>1?" notificaciones":" notificación")+"</li>";html+='<li><ul class="menu inner-content-div">',$.each(data.data,(function(i,v){let icon="fa fa-circle-o",color="";switch(v.cliente_seguimientos.accion_realizar_id){case ACCIONES.TELEFONO:icon="fa fa-phone",color="text-success";break;case ACCIONES.CORREO:icon="fa fa-envelope",color="text-warning";break;case ACCIONES.MENSAJE:icon="fa fa-comment",color="text-info";break;case ACCIONES.WHATSAPP:icon="fa fa-whatsapp",color="text-success"}html+='<li><a href="#" data-info="info-'+v.clientes.id+'" class="card-detail-notification"><i class="fa '+icon+" "+color+'"></i>'+v.cliente_seguimientos.accion_realizar.name+" a "+v.clientes.nombres+" a las "+v.cliente_seguimientos.hora_accion_realizar+"</a></li>"})),html+="</li></ul>",$(".notifications-menu .dropdown-menu").removeClass("text-center p-15").html("").append(html)}))}"/"!=window.location.pathname&&localStorage.setItem("cliente_id",""),$("#exportExcel").click((function(){invocarModal("/cliente/partialViewExport/")})),$("#importExcel").click((function(){invocarModal("/cliente/partialViewImport/")})),$("#notifications > a").click((function(){$(this).parent().hasClass("show")||getNotifications()})),$("#ModalCambiarPassword").on("click",(function(){invocarModal("/changePassword/partialView")}))})),$("body").find("a").on("click",(function(){localStorage.setItem("cliente_id","")})),$(document).on("click","a.card-detail-notification",(function(){const $id=$(this).attr("data-info").split("-")[1];localStorage.setItem("cliente_id",$id),window.location.href="/"}));try{window.addEventListener("submit",(function(e){const form=e.target;if("multipart/form-data"===form.getAttribute("enctype")&&form.dataset.ajax){e.preventDefault(),e.stopImmediatePropagation(),$(form).find("input[type=text]").each((function(){this.inputmask&&this.inputmask._valueSet(this.inputmask.unmaskedvalue(),!0)}));const xhr=new XMLHttpRequest;xhr.open(form.method,form.action),xhr.addEventListener("loadend",(function(){null!==form.getAttribute("data-ajax-loading")&&""!==form.getAttribute("data-ajax-loading")&&(document.getElementById(form.getAttribute("data-ajax-loading").substr(1)).style.display="none"),null!==form.getAttribute("data-ajax-complete")&&""!==form.getAttribute("data-ajax-complete")&&window[form.getAttribute("data-ajax-complete")].apply(this,[])})),xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status?window[form.getAttribute("data-ajax-success")].apply(this,[JSON.parse(xhr.responseText)]):window[form.getAttribute("data-ajax-failure")].apply(this,[xhr.status]))};const confirm=form.getAttribute("data-ajax-confirm");confirm?swal({title:"Confirmacion",text:confirm,type:"info",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0},(function(){null!==form.getAttribute("data-ajax-begin")&&""!==form.getAttribute("data-ajax-begin")&&window[form.getAttribute("data-ajax-begin")].apply(this,[]),xhr.send(new FormData(form))})):(null!==form.getAttribute("data-ajax-loading")&&""!==form.getAttribute("data-ajax-loading")&&(document.getElementById(form.getAttribute("data-ajax-loading").substr(1)).style.display="block"),null!==form.getAttribute("data-ajax-begin")&&""!==form.getAttribute("data-ajax-begin")&&window[form.getAttribute("data-ajax-begin")].apply(this,[]),xhr.send(new FormData(form)))}}),!0)}catch(err){console.log(err)}try{toastr.options={closeButton:!0,debug:!0,newestOnTop:!0,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!0,showDuration:"1000",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},$.validator.setDefaults({ignore:[]})}catch(err){console.log(err)}function invocarVista(url,onHiddenView){$.ajax({url:url,type:"GET",dataType:"html",cache:!1,success:function(data){onHiddenView&&onHiddenView(data)},beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()}})}function invocarModal(url,onHiddenModal){$.ajax({url:url,type:"GET",dataType:"html",cache:!1,success:function(data){const $modal=$("<div class='parent'>").append(data);$modal.find(">.modal").on("hidden.bs.modal",(function(){onHiddenModal&&onHiddenModal($(this)),$(this).parent().remove()})),$modal.find(">.modal").modal("show"),$("body").append($modal)},beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()}})}function onSuccessForm(data,$form,$modal,onSucess){null!=$form&&$form.find("span[data-valmsg-for]").text(""),!0===data.Success?($form.trigger("reset"),$modal&&$modal.attr("data-reload","true"),swal("Bien!",data.Message?data.Message:"Registro/Guardado Correctamente","success"),$modal&&$modal.modal("hide"),onSucess&&onSucess(data)):(data.Errors&&$.each(data.Errors,(function(i,item){null!=$form&&0!==$form.find("span[data-valmsg-for="+i+"]").length&&$form.find("span[data-valmsg-for="+i+"]").text(item[0])})),swal("Algo Salio Mal!",data.Message?data.Message:"Verifique los campos ingresados","error"))}function onFailureForm(){swal("Algo Salio Mal!","Ocurrio un error al Guardar!!","error")}function confirmAjax(url,parameters,type,msg,msgSuccess,onSuccess,onErrors){swal({title:"Confirmación",text:msg||"¿ Está seguro ?",type:"warning",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0},(function(){actionAjax(url,parameters,type,onSuccess,!0,msgSuccess,onErrors)}))}function actionAjax(url,parameters,type,onSuccess,isToConfirm,msgSuccess,onErrors){$.ajax({url:url,data:parameters,type:null!=type?type:"POST",cache:!1,processData:!1,contentType:!1,success:function(data){!0===isToConfirm?!0===data.Success?(swal("Bien!",msgSuccess||"Proceso realizado Correctamente","success"),onSuccess&&onSuccess(data)):onErrors?onSuccess(data):swal("Algo Salio Mal!",data.Message,"error"):onSuccess&&onSuccess(data)},beforeSend:function(){!0!==isToConfirm&&$("#loading").show()},complete:function(){!0!==isToConfirm&&$("#loading").hide()}})}function createModal(title,body,onHidden){const template=`<div id="myModal" class="modal fade" role="dialog">\n                      <div class="modal-dialog">\n                        <div class="modal-content">\n                          <div class="modal-header">\n                            <button type="button" class="close" data-dismiss="modal">&times;</button>\n                            <h4 class="modal-title">${title}</h4>\n                          </div>\n                          <div class="modal-body">\n                            ${body}\n                          </div>\n                          <div class="modal-footer">\n                            <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>`,$modal=$(template);$modal.on("hidden.bs.modal",(function(){$modal.remove(),onHidden&&onHidden()})),$modal.modal("show")}function getDate(){const now=new Date,primerDia=new Date(now.getFullYear(),now.getMonth(),1),ultimoDia=new Date(now.getFullYear(),now.getMonth()+1,0);return{Now:now,FirstDay:primerDia,LastDay:ultimoDia}}function isNumberKey(evt){var charCode=evt.which?evt.which:event.keyCode;return!(charCode>31&&(charCode<48||charCode>57))}function agregarCommaMillions(data){var str=data.toString().split(".");return str[0].length>=4&&(str[0]=str[0].replace(/(\d)(?=(\d{3})+$)/g,"$1,")),str.join(".")}function getFormatDate(date){const array=date.split("/"),f=new Date(array[2],array[1]-1,array[0]);return f.format("yyyy-mm-dd")}function readImage(input,img){if(input.files&&input.files[0]){const reader=new FileReader;reader.onload=function(e){img.attr("src",e.target.result)},reader.readAsDataURL(input.files[0])}else img.attr("src","/auth/layout/img/default.gif")}$((function(){$(document).on("show.bs.modal",".modal",(function(event){var zIndex=1040+10*$(".modal:visible").length;$(this).css("z-index",zIndex),setTimeout((function(){$(".modal-backdrop").not(".modal-stack").css("z-index",zIndex-1).addClass("modal-stack")}),0),$("body").css("overflow","hidden")})),$(document).on("hidden.bs.modal",".modal",(function(event){0===$(".modal.fade.in").length&&$("body").css("overflow","auto")}));const swalclose=window.swal.close,swal=window.swal;window.swal=function(){const previousWindowKeyDown=window.onkeydown;swal.apply(this,Array.prototype.slice.call(arguments,0)),window.onkeydown=previousWindowKeyDown},window.swal.close=function(){swalclose.apply(this)},$(document).on("keyup keypress","form",(function(e){const keyCode=e.keyCode||e.which;if(13===keyCode)return e.preventDefault(),!1})),$.ajaxSetup({cache:!1})}));